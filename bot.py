import logging
import os
import pandas as pd
import pytz
import re
import numpy as np
import time

from telegram import *
from telegram.ext import *
from requests import *

import yoomoney
from yoomoney import Quickpay
from yoomoney import Client

import datetime
from datetime import datetime
from datetime import timedelta

import threading
from threading import Timer


# Enables logging
logging.basicConfig(format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
                    level=logging.INFO)

logger = logging.getLogger(__name__)

PORT = int(os.environ.get('PORT', '8443'))

session_list_dic = {
    'psycodynamic':
        {'name':"–ü—Å–∏—Ö–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞",
         'date_time':"–ø–æ —á–µ—Ç–≤–µ—Ä–≥–∞–º, 20:00 –ú–°–ö",
         'reminder':"3_20:00",
         'specialist':"–§—ë–¥–æ—Ä –ö–æ–Ω—å–∫–æ–≤",
         'picture':"NULL",
         'description':"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 10 –Ω–µ–¥–µ–ª—å",
         'invite': f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':15,
         'members':{},
         'queue':{}},
    'volunteertraining':
        {'name':"–ì—Ä—É–ø–ø–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –∏–ª–∏ –∫–∞–∫ –≤–æ–ª–æ–Ω—Ç—ë—Ä",
         'date_time':"—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é, 10 –Ω–µ–¥–µ–ª—å",
         'reminder':"",
         'specialist':"–§—ë–¥–æ—Ä –ö–æ–Ω—å–∫–æ–≤",
         'picture':"NULL",
         'description':"* –í—ã–≥–æ—Ä–∞–Ω–∏–µ - –∫–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –∏ —á—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –æ–Ω–æ –≤–∞—Å –Ω–∞—Å—Ç–∏–≥–ª–æ\n"
                       "* –°–∞–ø–æ–∂–Ω–∏–∫ –±–µ–∑ —Å–∞–ø–æ–≥ - –∫–∞–∫ –Ω–∞—É—á–∏—Ç—å—Å—è –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Å–µ–±–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ä–æ—à–æ —É–º–µ–µ—Ç–µ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –¥—Ä—É–≥–∏—Ö\n"
                       "* –ü—Ä–æ–µ–∫—Ü–∏—è - –∫–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –≤–∏–¥–µ—Ç—å —Å–µ–±—è –≤ –∫–ª–∏–µ–Ω—Ç–µ\n"
                       "* –≠–º–ø–∞—Ç–∏—è - –∫–æ–≥–¥–∞ –æ–Ω–∞ –ø–æ–º–æ–≥–∞–µ—Ç, –∞ –∫–æ–≥–¥–∞ –º–µ—à–∞–µ—Ç\n"
                       "* –ì—Ä–∞–Ω–∏—Ü—ã - –∫–∞–∫ —Ç–æ —á—Ç–æ –º—ã –Ω–µ –¥–µ–ª–∞–µ–º –∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ–º —Å–µ–±–µ –∏ –¥—Ä—É–≥–∏–º –º–æ–∂–µ—Ç –ø–æ–º–æ–≥–∞—Ç—å –≤–∞–º –∏ –¥—Ä—É–≥–∏–º –¥–æ–±–∏—Ç—å—Å—è —Ö–æ—Ä–æ—à–∏—Ö –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤\n"
                       "* –¢–∞–∫–∂–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏ –æ—Ç–≤–µ—Ç—è—Ç –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã –æ —Ç–æ–º –∫–∞–∫ –ø–æ–º–æ–≥–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –≤—Å–µ—Ö\n\n"
                       "* –§–æ–∫—É—Å - –∫–∞–∫ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–µ—Ä–µ–∂–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω—ã –≤ —Å–∏—Ç—É–∞—Ü–∏–∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏, –æ—Ç–∫—Ä—ã—Ç—å –Ω–æ–≤—ã–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ã –≤ —Å–µ–±–µ, –æ–∫—Ä—É–∂–∞—é—â–∏—Ö, –∏ –º–∏—Ä–µ.\n\n"
                       "* –ê–∫—Ç–∏–≤–Ω—ã–π –±–º–µ–Ω –ª–∏—á–Ω—ã–º –æ–ø—ã—Ç–æ–º, —á—É–≤—Å—Ç–≤–∞–º–∏, –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è–º–∏. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É, –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å, –Ω–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏, –≤ –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ.\n\n"
                       "* –ü—Å–∏—Ö–æ–ª–æ–≥ –ø–æ–º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é, —Å–≤–æ–±–æ–¥–Ω—É—é –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–∫—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≥—Ä—É–ø–ø–æ–π –∏ –∫–∞–∂–¥—ã–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –æ–ø—ã—Ç, –Ω–∞–≤—ã–∫–∏ –∏ –∑–Ω–∞–Ω–∏—è –ø–æ–º–æ–≥—É—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–º–∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º–∏ —Å–∏—Ç—É–∞—Ü–∏—è–º–∏.",
         'invite':f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':20,
         'members':{},
         'queue':{}},
    'meditation':
        {'name':"–ú–µ–¥–∏—Ç–∞—Ü–∏—è",
         'date_time':"–ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º, 21:30 –ú–°–ö",
         'reminder':"0_21:30",
         'specialist':"–ù–∞–¥–µ–∂–¥–∞ –°–µ—Ä–µ–±—Ä—è–Ω–∏–∫–æ–≤–∞",
         'picture':"NULL",
         'description':"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 10 –Ω–µ–¥–µ–ª—å",
         'invite':f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':20,
         'members':{},
         'queue':{}},
    'metoday':
        {'name':"–ì—Ä—É–ø–ø–∞ –¥–ª—è –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤ 13-15 –ª–µ—Ç \"–Ø —Å–µ–≥–æ–¥–Ω—è\"",
         'date_time':"–ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º, 19:00 –ú–°–ö",
         'reminder':"0_19:00",
         'specialist':"–ù–∞–¥–µ–∂–¥–∞ –°–µ—Ä–µ–±—Ä—è–Ω–∏–∫–æ–≤–∞",
         'picture':"NULL",
         'description':"–≠—Ç–æ –≥—Ä—É–ø–ø–∞ –¥–ª—è –¥–µ—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ  –ø–æ—Å–ª–µ –ø–µ—Ä–µ–µ–∑–¥–∞:\n"
                       "* –æ—â—É—â–∞—é—Ç —Å–µ–±—è –¥–µ–∑–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–º;\n"
                       "* –ø—Ä–æ—è–≤–ª—è—é—Ç –∞–ø–∞—Ç–∏—é, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ —á–µ–º—É-–ª–∏–±–æ;\n"
                       "* –∑–∞–º—ã–∫–∞—é—Ç—Å—è –≤ —Å–µ–±–µ, –æ—Ç–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤–∞—Ö;\n"
                       "* –∏—Å–ø—ã—Ç—ã–≤–∞—é—Ç –≤—ã—Å–æ–∫—É—é —Ç—Ä–µ–≤–æ–≥—É, –ø–ª–æ—Ö–æ —Å–ø—è—Ç;\n"
                       "* –æ—Ç–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–æ–≤–æ–µ –º–µ—Å—Ç–æ –∂–∏–∑–Ω–∏, —Ç—Ä–µ–±—É—é—Ç –≤–µ—Ä–Ω—É—Ç—å –∏—Ö –¥–æ–º–æ–π;\n"
                       "* –ø—Ä–æ—è–≤–ª—è—é—Ç –∞–≥—Ä–µ—Å—Å–∏—é, —É—Å—Ç—Ä–∞–∏–≤–∞—é—Ç –ø—Ä–æ—Ç–µ—Å—Ç—ã\n\n"
                       "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 8 –≤—Å—Ç—Ä–µ—á –ø–æ 1.5 —á–∞—Å–∞",
         'invite':f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':10,
         'members':{},
         'queue':{}},
    'protest':
        {'name':"–ì—Ä—É–ø–ø–∞ \"–ü—Ä–æ—Ç–µ—Å—Ç\"",
         'date_time':"–ø–æ –≤—Ç–æ—Ä–Ω–∏–∫–∞–º, 19:00 –ú–°–ö",
         'reminder':"1_19:00",
         'specialist':"–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ò–≤–∞–Ω–æ–≤–∞",
         'picture':"NULL",
         'description':"–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –≤ –†–æ—Å—Å–∏–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–µ—Ç 10 - —ç—Ç–æ –∏—Å—Ç–æ—Ä–∏—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–∫–∞–∑–∞–ª–∏ \"—è - –ø—Ä–æ—Ç–∏–≤\" –∏ –æ–∫–∞–∑–∞–ª–∏—Å—å –ø—Ä–µ–¥–∞—Ç–µ–ª—è–º–∏ —Å–≤–æ–µ–π —Å–≤–æ–µ–π —Å—Ç—Ä–∞–Ω—ã. –ê –æ –ø—Ä–µ–¥–∞—Ç–µ–ª—è—Ö –Ω–µ –ø—Ä–∏–Ω—è—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç—å.\n"
                       "–¢–∞–∫ –Ω–∞–º –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –¥—É–º–∞—Ç—å –≤–ª–∞—Å—Ç—å–∏–º—É—â–∏–µ."
                       "–ò –∫–æ–≥–¥–∞ —Ç–µ–º–∏, –∫—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —É—Å—Ç—Ä–∞—à–∞—é—â–∏–µ –ª—é–¥–µ–π –∑–∞–∫–æ–Ω—ã, –¥–≤–∏–∂–µ—Ç —Å—Ç—Ä–∞—Ö, –ª—é–¥—å–º–∏, –≤—ã—Ö–æ–¥—è—â–∏—Ö –Ω–∞ –º–∏—Ç–∏–Ω–≥–∏, –Ω–µ –±–æ—è—â–∏—Ö—Å—è —Å–∫–∞–∑–∞—Ç—å —Å–≤–æ–µ –º–Ω–µ–Ω–∏–µ, –¥–≤–∏–∂–µ—Ç —Å–∏–ª–∞, —Å–æ–≤–µ—Å—Ç—å –∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–æ–ª—á–∞—Ç—å. "
                       "–¢–∞–∫ —Å–ª—É—á–∏–ª–æ—Å—å, —á—Ç–æ —ç—Ç–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–µ –≤ –ø–æ—á–µ—Ç–µ. –ê –≥–æ–≤–æ—Ä–∏—Ç—å —Ç–æ, —á—Ç–æ –¥—É–º–∞–µ—à—å, —Å –∫–∞–∂–¥—ã–º –¥–Ω—ë–º –≤—Å—ë –æ–ø–∞—Å–Ω–µ–µ.\n\n"
                       "–ß–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –Ω–µ–ø—Ä–æ—Å—Ç—ã–º –æ–ø—ã—Ç–æ–º, —Å –Ω–∞—Å–∏–ª–∏–µ–º, –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è. –û–±—ã—á–Ω–∞—è –∂–∏–∑–Ω—å \"–ø–æ—Å–ª–µ\" –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–¥—á–∏–Ω—è—Ç—å—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å—Ç—Ä–∞—Ö–∞–º –≤ —Å–ª–µ–¥—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–∂–∏—Ç–æ–≥–æ –æ–ø—ã—Ç–∞.\n\n"
                        "–í–æ–∑–º–æ–∂–Ω–æ, –í—ã –∏–º–µ–Ω–Ω–æ —Ç–æ—Ç —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å —Ç–∞–∫–∏–º –æ–ø—ã—Ç–æ–º. –ò –Ω–∞—à–∞ –≥—Ä—É–ø–ø–∞ –±—É–¥–µ—Ç –¥–ª—è –í–∞—Å —Ç–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º, –≥–¥–µ –º–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ–±–æ –≤—Å–µ–º. –ò, —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ, –æ —Å–≤–æ–µ–π –±–æ–ª–∏ –∏ —Å—Ç—Ä–∞—Ö–∞—Ö.\n\n"
                       "–î–ª—è –∫–æ–≥–æ —ç—Ç–∞ –≥—Ä—É–ø–ø–∞:\n"
                       "* –í—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ —Å –í–∞–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç\n"
                       "* –í—ã –±–æ–∏—Ç–µ—Å—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏ –ø–æ–º–æ—â—å—é\n"
                       "* –í—ã –∑–∞–¥–∞–µ—Ç–µ—Å—å –≤–æ–ø—Ä–æ—Å–æ–º \"—á—Ç–æ –±—É–¥–µ—Ç –¥–∞–ª—å—à–µ?\" –∏ –Ω–µ –∑–Ω–∞–µ—Ç–µ –æ—Ç–≤–µ—Ç\n"
                       "* –í–∞–º –∑–Ω–∞–∫–æ–º–∞ –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞, –ø–æ—Ç–µ—Ä—è –∞–ø–ø–µ—Ç–∏—Ç–∞, –∫–æ—à–º–∞—Ä—ã\n"
                       "* —á–µ–ª–æ–≤–µ–∫ –≤ —Ñ–æ—Ä–º–µ –≤—ã–∑—ã–≤–∞–µ—Ç —É–∂–∞—Å –∏ –ø–∞–Ω–∏–∫—É\n"
                       "* –í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –ø—Ä–∏–≤—ã—á–Ω—ã–º–∏  –¥–µ–ª–∞–º–∏\n"
                       "* –í—ã –Ω–µ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏\n\n"
                       "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å -  8 –≤—Å—Ç—Ä–µ—á –ø–æ 1,5 —á–∞—Å–∞.",
         'invite':f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':15,
         'members':{},
         'queue':{}},
    'movingout':
        {'name':"–ì—Ä—É–ø–ø–∞ –¥–ª—è –ø–µ—Ä–µ–µ–∑–∂–∞—é—â–∏—Ö/–ø–µ—Ä–µ–µ—Ö–∞–≤—à–∏—Ö",
         'date_time':"–ø–æ –ø—è—Ç–Ω–∏—Ü–∞–º, 19:00 –ú–°–ö",
         'reminder':"4_19:00",
         'specialist':"–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ò–≤–∞–Ω–æ–≤–∞",
         'picture':"NULL",
         'description':"–≠–º–∏–≥—Ä–∞—Ü–∏—è –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å–∏–ª—å–Ω–µ–π—à–∏–º —Å—Ç–æ–µ—Å—Å–∞–º. –ß–µ–ª–æ–≤–µ–∫—É –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–æ—Ç–µ—Ä—é –ø—Ä–µ–∂–Ω–µ–≥–æ –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏  –∏ —É—Å–≤–∞–∏–≤–∞—Ç—å –Ω–æ—Ä–º—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–µ.  –ò –Ω–µ—Ä–µ–¥–∫–æ –≤–æ–ø—Ä–æ—Å—ã \"–∫—Ç–æ —è?\", \"–ì–¥–µ –º–æ–µ –º–µ—Å—Ç–æ –≤ –º–∏—Ä–µ?\", —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏, –∫–∞–∫ –Ω–∏–∫–æ–≥–¥–∞. –ü—Å–∏—Ö–∏—á–µ—Å–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –¥–æ–≤–æ–ª—å–Ω–∞ —Å–∏–ª—å–Ω–∞—è, —ç–º–æ—Ü–∏–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ç—Ä—É–¥–Ω–æ –≤—ã–Ω–æ—Å–∏–º—ã–º–∏.\n\n"
                       "–ú—ã –æ—Ç–∫—Ä—ã–≤–∞–µ–º –Ω–∞–±–æ—Ä –≤ –≥—Ä—É–ø–ø—É –¥–ª—è —Ç–µ—Ö, –∫–æ–º—É —Ç—Ä—É–¥–Ω–æ –≤ —ç—Ç–∏—Ö –Ω–µ–ø—Ä–æ—Å—Ç—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö. –≠—Ç–∞ –≥—Ä—É–ø–ø–∞ –¥–ª—è –≤–∞—Å, –µ—Å–ª–∏:\n\n"
                       "* –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–µ—Ä–µ–µ–∑–¥\n"
                       "* –≤–∞—Å –Ω–µ –ø–æ–Ω–∏–º–∞—é—Ç –±–ª–∏–∑–∫–∏–µ –∏/–∏–ª–∏ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã –ø–µ—Ä–µ–¥ —Ç–µ–º–∏, –∫—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è\n"
                       "* –≤—ã –ø–µ—Ä–µ–µ—Ö–∞–ª–∏ –∏ –≤–∞–º —Ç—Ä—É–¥–Ω–æ –¥–∞—é—Ç—Å—è —ç—Ç–∞–ø—ã –∞–¥–∞–ø—Ç–∞—Ü–∏–∏\n"
                       "* –≤—ã –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ —Ç–æ–≥–æ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —á—É–≤—Å—Ç–≤–∞ \"–Ω—É –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ!\"\n"
                       "* –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –±—ã—Ç–æ–≤—ã–µ –¥–µ–ª–∞ –¥–∞—é—Ç—Å—è –≤–∞–º —Å —Ç—Ä—É–¥–æ–º –≤ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–µ\n"
                       "* –≤–∞–º —Ç—Ä—É–¥–Ω–æ –Ω–∞–π—Ç–∏ —Å–≤–æ–π –∫—Ä—É–≥ –æ–±—â–µ–Ω–∏—è\n"
                       "* –≤—ã –ø–µ—Ä–µ–µ—Ö–∞–ª–∏ –∏ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ –∏ –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç\n"
                       "* –≤—ã —á–∞—Å—Ç–æ –∑–∞–¥–∞–µ—Ç–µ—Å—å –≤–æ–ø—Ä–æ—Å–æ–º \"–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —è –ø–æ—Å—Ç—É–ø–∏–ª_–∞?\"\n"
                       "* –≤–∞–º —Å–ª–æ–∂–Ω–æ –Ω–∞ –Ω–æ–≤–æ–º –º–µ—Å—Ç–µ –ø–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–º –ø—Ä–∏—á–∏–Ω–∞–º\n"
                       "* —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç\n\n"
                       "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 8 –≤—Å—Ç—Ä–µ—á –ø–æ 1,5 —á–∞—Å–∞.",
         'invite':f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':15,
         'members':{},
         'queue':{}},
    'stayinrussia':
        {'name':"–Ø –æ—Å—Ç–∞—é—Å—å!",
         'date_time':"–ø–æ –≤—Ç–æ—Ä–Ω–∏–∫–∞–º, 19:00 –ú–°–ö",
         'reminder':"1_19:00",
         'specialist':"–¢–∞—Ç—å—è–Ω–∞",
         'picture':"NULL",
         'description':"–ì—Ä—É–ø–ø–∞ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –ø—Ä–∏–Ω—è–ª –¥–ª—è —Å–µ–±—è –Ω–µ–ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç—å—Å—è –≤ –†–æ—Å—Å–∏–∏.\n\n"
                       "–¢–µ –∏–∑ –Ω–∞—Å, –∫—Ç–æ –æ—Å—Ç–∞–ª—Å—è –≤ –†–æ—Å—Å–∏–∏ –≤ —ç—Ç–∏ –Ω–µ–ø—Ä–æ—Å—Ç—ã–µ –≤—Ä–µ–º–µ–Ω–∞, —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏. –ó–¥–µ—Å—å –º—ã —Ç–∞–∫–∂–µ –≤—Å—Ç—Ä–µ—á–∞–µ–º—Å—è —Å–æ —Å—Ç—Ä–∞—Ö–æ–º, –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å—é, –æ—â—É—â–µ–Ω–∏–µ–º –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞ –∏ —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏. –ü–æ—ç—Ç–æ–º—É —Å–µ–π—á–∞—Å –∫–∞–∂–¥–æ–º—É –∏–∑ –Ω–∞—Å –∫–∞–∫ –Ω–∏–∫–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —á—É–≤—Å—Ç–≤–æ \"–Ø –Ω–µ –æ–¥–∏–Ω\".\n\n"
                       "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 5 –Ω–µ–¥–µ–ª—å.",
         'invite':f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':10,
         'members':{},
         'queue':{}},
    'arttheraty':
        {'name':"–ê—Ä—Ç-—Ç–µ—Ä–∞–ø–∏—è",
         'date_time':"–ø–æ –ø—è—Ç–Ω–∏—Ü–∞–º, 18:00 –ú–°–ö",
         'reminder':"4_18:00",
         'specialist':"–ù–∞–¥–µ–∂–¥–∞ –ë–∞–ª–∏—Ü–∫–∞—è",
         'picture':"NULL",
         'description':"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 8 –Ω–µ–¥–µ–ª—å.",
         'invite':f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':10,
         'members':{},
         'queue':{}},
    'forparents':
        {'name':"–ì—Ä—É–ø–ø–∞ –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π",
         'date_time':"–ø–æ —Å—Ä–µ–¥–∞–º, 19:00 –ú–°–ö",
         'reminder':"2_19:00",
         'specialist':"–î–∏–Ω–∞ –ü–∞–ª–µ—Ö–∞",
         'picture':"NULL",
         'description':"\"–ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–±—è, –ø—Å–∏—Ö–∏–∫—É –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –¥–µ—Ç—å–º–∏ –≤ —É—Å–ª–æ–≤–∏—è—Ö —Ç–æ—Ç–∞–ª—å–Ω–æ–π –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏\""
                       "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω–∞–º –≤—Å–µ–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —Ä–µ—à–µ–Ω–∏—è. –ù–æ –µ—Å–ª–∏ —Ç—ã —Ä–æ–¥–∏—Ç–µ–ª—å, —Ç–æ —ç—Ç–∏ —Ä–µ—à–µ–Ω–∏—è - –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞ —Å–µ–±—è.\n\n"
                       "* –ö–∞–∫ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å —ç—Ç–∏–º –≥—Ä—É–∑–æ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ –ø—Ä–æ–≤–∞–ª–∏—Ç—å—Å—è –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–µ—Ç—Å–∫–∏–µ —Å—Ç—Ä–∞—Ö–∏?\n"
                       "* –ö–∞–∫ —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Å–µ–±–µ - –≤–∑—Ä–æ—Å–ª–æ–º—É- –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö —á—É–≤—Å—Ç–≤?]n"
                       "* –ö–∞–∫ –Ω–∞—É—á–∏—Ç—å —Ä–µ–±—ë–Ω–∫–∞ –ø—Ä–æ–∂–∏–≤–∞—Ç—å —Å–≤–æ–∏?\n"
                       "* –ö–∞–∫ —É—Å–ø–æ–∫–æ–∏—Ç—å —Ä–µ–±—ë–Ω–∫–∞, –Ω–µ –≤–ø–∞–¥–∞—è –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ç—Ä–µ–≤–æ–≥—É?\n"
                       "* –ú–æ–∂–µ—Ç –ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å –±—ã—Ç—å —Å–ª–∞–±—ã–º?\n"
                       "* –ö–∞–∫ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –±–ª–∏–∑–∫–∏–º–∏, –Ω–µ –≤–ø–∞–¥–∞—è –≤ –∞–≥—Ä–µ—Å—Å–∏—é –∏ –Ω–µ —Ä–∞–Ω—è—Å—å?\n"
                       "* –ö–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—å —Å –¥–µ—Ç—å–º–∏ –æ –≤–∞–∂–Ω–æ–º –∏ —Å–ª–æ–∂–Ω–æ–º?\n\n"
                       "–≠—Ç–∏ –∏ –¥—Ä—É–≥–∏–µ –≤–æ–ø—Ä–æ—Å—ã –º—ã —Ä–∞–∑–±–µ—Ä—ë–º –≤ –∑–∞–∫—Ä—ã—Ç–æ–π –≥—Ä—É–ø–ø–µ –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π. –ì—Ä—É–ø–ø–µ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞ —Å–µ–±—è. –ò —Å–∞–º –ø—Ä–∏ —ç—Ç–æ–º –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–µ.\n\n"
                       "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 5 –Ω–µ–¥–µ–ª—å",
         'invite':f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':10,
         'members':{},
         'queue':{}},
    'blackbox':
        {'name':"–ß–µ—Ä–Ω—ã–π —è—â–∏–∫",
         'date_time':"–ø–æ –ø—è—Ç–Ω–∏—Ü–∞–º, 20:30 –ú–°–ö",
         'reminder':"4_20:30",
         'specialist':"",
         'picture':"NULL",
         'description':"–Ø –µ—Å—Ç—å –∏ —è –∑–¥–µ—Å—å.\n\n"
                       "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - 5 –Ω–µ–¥–µ–ª—å",
         'invite':f"Meeting ID: 230 365 3201 | Passcode: gaXp8U | <a href='https://us05web.zoom.us/j/2303653201?pwd=WWJ1a3ZoblVFWTJIRHh4cGt6K0ppdz09'>Zoom</a>",
         'opengroup':"0",
         'limit':15,
         'members':{},
         'queue':{}},
    'crisis':
        {'name':"–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è",
         'date_time':"–≤ —É–¥–æ–±–Ω–æ–µ –¥–ª—è –í–∞—Å –≤—Ä–µ–º—è –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å —Ç–µ—Ä–∞–ø–µ–≤—Ç–æ–º",
         'reminder':"",
         'specialist':"–¢–µ—Ä–∞–ø–µ–≤—Ç-–≤–æ–ª–æ–Ω—Ç–µ—Ä —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ @helpwithoutprejudice",
         'picture':"NULL",
         'description':"–õ–∏—á–Ω–∞—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è –¥–ª—è —Ç–µ—Ö, –∫–æ–º—É —Å—Ä–æ—á–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞",
         'invite':f"",
         'opengroup':"0",
         'limit':0,
         'members':{},
         'queue':{}}
}

admin_cids = ['5358195597']

# We define command handlers. Error handlers also receive the raised TelegramError object in error.
def start(update, context):
    """Sends a message when the command /start is issued."""
    update.message.reply_text('Hi!')

def help(update, context):
    """Sends a message when the command /help is issued."""
    update.message.reply_text('Help!')

def startCommand(update: Update, context: CallbackContext):
    buttons = [[InlineKeyboardButton("üëç", callback_data="like")], [InlineKeyboardButton("üëé", callback_data="dislike")]]
    context.bot.send_message(chat_id=update.effective_chat.id, reply_markup=InlineKeyboardMarkup(buttons), text="Did you like the image?")

def queryHandler(update: Update, context: CallbackContext):
    query = update.callback_query.data
    update.callback_query.answer()
    # context.bot.send_message(chat_id=update.effective_chat.id, text=query)


def echo(update, context):
    """Echos the user message."""
    update.message.reply_text(update.message.text)


def error(update, context):
    """Logs Errors caused by Updates."""
    logger.warning('Update "%s" caused error "%s"', update, context.error)


def main():
    """Starts the bot."""
    # Creates the Updater and pass it your bot's token.
    # Make sure to set use_context=True to use the new context based callbacks
    # Post version 12 this will no longer be necessary
    TOKEN = '5423176144:AAEAHewAvanY5W4ImVC7P3RoPzlkAdzG0wA'#enter your token here
    APP_NAME='https://helpwithoutprejudice.herokuapp.com/' #Edit the heroku app-name
    yoomoney_token = "4100117805460248.11EA3C4E3C9C83223569E5AC97BB3021B91BF3223716AF874F39B444D9FC3BD60D5D0EA790F537779AF123D171566090201CCEB73D2B956B925E2E7C95F7CD781C7894BF3C7549CB55D93FCD6E7AEB36F86AFBCE9747845968DB0D6794A548702838EB302925667B83BA85CFBC1F6234EB89C99BECBD15EF60CBB265D7BFFCEB"

    updater = Updater(TOKEN, use_context=True)
    client = Client(yoomoney_token)

    # Get the dispatcher to register handlers
    dp = updater.dispatcher

    # on different commands - answer in Telegram
    dp.add_handler(CommandHandler("start", startCommand))
    dp.add_handler(CommandHandler("help", help))
    dp.add_handler(CallbackQueryHandler(queryHandler))

    # on noncommand i.e message - echo the message on Telegram
    # dp.add_handler(MessageHandler(Filters.text, echo))

    # log all errors
    dp.add_error_handler(error)
    updater.start_webhook(listen="0.0.0.0", port=PORT, url_path=TOKEN, webhook_url=APP_NAME + TOKEN)
    updater.idle()


if __name__ == '__main__':
    main()